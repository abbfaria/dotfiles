### GENERAL SETTINGS ###
set -g default-terminal "screen-256color" # Enable 256 colors for proper highlighting
set -g base-index 1                      # Start window numbering at 1 (more intuitive)
set -g renumber-windows on               # Automatically renumber windows when closed
set -g history-limit 100000              # Increase scrollback buffer size
set -g display-time 3000                 # Longer message display time (ms)
set -g status-interval 2                 # Refresh status bar every 2 seconds
set -g set-clipboard on                  # Sync with system clipboard (requires tmux 3.2+)
set -g focus-events on                   # Enable focus events for terminal apps

### MOUSE SUPPORT (Full-featured) ###
set -g mouse on                          # Enable mouse mode:
  # - Click to select window/pane
  # - Drag to resize panes
  # - Scroll through history
  # - Select/click URLs with Ctrl
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"

### STATUS BAR CUSTOMIZATION ###
set -g status-position bottom
set -g status-style bg=colour234,fg=white
set -g status-left-length 85
set -g status-left "#[fg=green]#S #[fg=white]>> #I:#P " # Session + window:pane
set -g status-right "#[fg=cyan]%Y-%m-%d %H:%M #[fg=yellow]#(whoami)@#h"

# Window status format
set -g window-status-format "#I:#W#F"
set -g window-status-current-format "#[reverse]#I:#W#F"
set -g window-status-separator " "

### PANE MANAGEMENT ###
set -g pane-border-style fg=colour238    # Inactive pane border color
set -g pane-active-border-style fg=green # Active pane border color

### PROGRAMMING ENHANCEMENTS ###
# Quick reload config (prefix + r)
bind r source-file ~/.config/tmux/tmux.conf \; display "Config reloaded!"

# Smart pane splitting (preserve current path)
bind '-' split-window -v -c "#{pane_current_path}"
bind '\' split-window -h -c "#{pane_current_path}"

# Copy mode vi bindings (scroll with vi keys)
#setw -g mode-keys vi
#bind-key -T copy-mode-vi v send-keys -X begin-selection
#bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Pane navigation without prefix (Ctrl+hjkl keys)
#bind -n C-h select-pane -L
#bind -n C-l select-pane -R
#bind -n C-k select-pane -U
#bind -n C-j select-pane -D

### SESSION MANAGEMENT ###
# Easier session creation (prefix + C)
bind C new-session -c "#{pane_current_path}"

# Session navigation (prefix + s)
bind s choose-tree -s
